<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Verjaardagen</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#121a33;
      --accent:#6ee7ff;
      --text:#eaf0ff;
      --muted:#aab6da;
      --good:#7CFFB2;
    }
    html,body{height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;}
    body{
      background: transparant;
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .wrap{width:min(1200px, 92vw);}
    .top{
      display:flex; justify-content:space-between; align-items:baseline; gap:16px;
      margin-bottom:18px;
    }
    h1{margin:0; font-size: clamp(34px, 4vw, 60px); letter-spacing:0.2px;}
    .date{color:var(--muted); font-size: clamp(16px, 1.6vw, 24px);}
    .card{
      background: transparant;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 22px;
      padding: 26px 28px;
      box-shadow: 0 18px 50px rgba(0,0,0,0.35);
    }
    .grid{display:grid; gap:14px;}
    .row{
      display:grid;
      grid-template-columns: 240px 1fr;
      gap:18px;
      align-items:center;
      padding: 18px 18px;
      border-radius: 18px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.06);
    }
    .label{
      font-size: clamp(16px, 1.8vw, 22px);
      color: rgba(255,255,255,0.85);
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .pill{
      display:inline-flex;
      width: fit-content;
      align-items:center;
      gap:8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(110,231,255,0.12);
      border: 1px solid rgba(110,231,255,0.25);
      color: var(--accent);
      font-weight: 800;
      letter-spacing: .2px;
    }
    .pill.good{
      background: rgba(124,255,178,0.12);
      border-color: rgba(124,255,178,0.25);
      color: var(--good);
    }
    .md{
      color: var(--muted);
      font-weight: 700;
      font-size: clamp(16px, 1.6vw, 22px);
    }

    /* Meerdere namen onder elkaar */
    .names { display:grid; gap: 6px; }
    .names .line{
      font-weight: 900;
      line-height: 1.05;
      font-size: clamp(24px, 2.7vw, 50px);
    }
    .names .line.small{
      font-weight: 850;
      opacity: 0.92;
      font-size: clamp(20px, 2.2vw, 50px);
    }
    .names .line.tiny{
      font-weight: 800;
      opacity: 0.85;
      font-size: clamp(18px, 1.9vw, 28px);
    }

    .foot{
      margin-top: 18px;
      color: rgba(255,255,255,0.45);
      font-size: 14px;
      display:flex; justify-content:flex-end; gap:12px; flex-wrap:wrap;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <h1></h1>
      <div class="date" id="todayText"></div>
    </div>

    <div class="card">
      <div class="grid">
        <div class="row" id="rowPrev">
          <div class="label">
            <span class="pill">‚è™ Jarig geweest!</span>
            <span class="md" id="prevDate">‚Äî</span>
          </div>
          <div>
            <div class="names" id="prevNames"></div>
          </div>
        </div>

        <div class="row" id="rowMid">
          <div class="label">
            <span class="pill" id="midPill">‚Äî</span>
            <span class="md" id="midDate">‚Äî</span>
          </div>
          <div>
            <div class="names" id="midNames"></div>
          </div>
        </div>

        <div class="row" id="rowNext">
          <div class="label">
            <span class="pill">‚è© Bijna jarig!</span>
            <span class="md" id="nextDate">‚Äî</span>
          </div>
          <div>
            <div class="names" id="nextNames"></div>
          </div>
        </div>
      </div>

      <div class="foot">
        <div id="updated"></div>
      </div>
    </div>
  </div>

<script>
  const tz = "Europe/Amsterdam";

  // Jouw lijst: dag-maand<TAB>naam
  const raw = `
1-2	Klaas Nagel
3-2	Lars Engbers
3-2	Ruben Rikmanspoel
10-2	Rita Stevelink
15-2	Eveline Hutten
16-2	Arnold Brummelhuis
16-2	Bram Lucas
18-2	Raymond Lansink
18-2	Lisette Lucas
19-2	Mykhailo Hrynda
26-2	Patrick Nijland
3-3	Richard de Vries
4-3	Tom Moleman
4-3	Rudy Beld
4-3	Sem Kienhuis
14-3	Michel Hoek
19-3	Gert Waterink
20-3	Stan Reekers
20-3	Rick Golbach
22-3	Rens van Rossum
22-3	Hennie Damhuis
22-3	Ronnie Bergman
24-3	Ties Gierveld
27-3	Thymen Haarhuis
29-3	Ruud van Es
30-3	Peter Vos
31-3	Chris Rikmanspoel
6-4	Sam Gierveld
9-4	Radek Kr√≥l
17-4	Arnold Timmerij
21-4	Mark Ophof
25-4	Jan Hoek
25-4	Ren√© Maathuis
26-4	Pascal Lokotte
29-4	Joost oude Avenhuis
`.trim();

  function escapeHtml(str){
    return String(str).replace(/[&<>"']/g, m => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
    }[m]));
  }

  function pad2(n){ return String(n).padStart(2, "0"); }

  function dmToMD(dm){
    // "1-2" -> "MM-DD"
    const m = dm.match(/^(\d{1,2})-(\d{1,2})$/);
    if (!m) throw new Error("Datum niet herkenbaar: " + dm);
    const d = Number(m[1]);
    const mo = Number(m[2]);
    return `${pad2(mo)}-${pad2(d)}`; // MM-DD
  }

  function mdToDM(md){
    // "MM-DD" -> "DD-MM"
    return `${md.slice(3,5)}-${md.slice(0,2)}`;
  }

  function todayMDY(){
    // en-CA => YYYY-MM-DD in tz
    const fmt = new Intl.DateTimeFormat("en-CA", {
      timeZone: tz, year:"numeric", month:"2-digit", day:"2-digit"
    });
    const parts = fmt.formatToParts(new Date());
    const y = Number(parts.find(p=>p.type==="year").value);
    const m = parts.find(p=>p.type==="month").value;
    const d = parts.find(p=>p.type==="day").value;
    return { y, md: `${m}-${d}` }; // MM-DD
  }

  function dayOfYearFromMD(md, year){
    const mm = Number(md.slice(0,2));
    const dd = Number(md.slice(3,5));
    const date = new Date(Date.UTC(year, mm-1, dd));
    const start = new Date(Date.UTC(year, 0, 1));
    return Math.floor((date - start) / 86400000);
  }

  function parseList(){
    const lines = raw.split("\n").map(x => x.trim()).filter(Boolean);
    const entries = [];
    for (const line of lines){
      const parts = line.split(/\t+/);
      if (parts.length < 2) continue;
      const dm = parts[0].trim();
      const name = parts.slice(1).join(" ").trim();
      entries.push({ name, md: dmToMD(dm) });
    }
    return entries;
  }

  function groupByMD(entries){
    const map = new Map();
    for (const e of entries){
      if (!map.has(e.md)) map.set(e.md, []);
      map.get(e.md).push(e.name);
    }
    // sort namen per dag
    for (const [md, names] of map){
      names.sort((a,b)=>a.localeCompare(b, "nl"));
      map.set(md, names);
    }
    return map;
  }

  function setSlot(prefix, md, names){
    document.getElementById(prefix + "Date").textContent = md ? mdToDM(md) : "‚Äî";

    const box = document.getElementById(prefix + "Names");
    box.innerHTML = "";

    if (!names || names.length === 0){
      box.innerHTML = `<div class="line">‚Äî</div>`;
      return;
    }

    // Alle namen onder elkaar, met subtiele schaal per extra regel
    names.forEach((n, i) => {
      const div = document.createElement("div");
      div.className = "line" + (i === 0 ? "" : i === 1 ? " small" : " tiny");
      div.innerHTML = escapeHtml(n);
      box.appendChild(div);
    });
  }

  function render(){
    // header datum
    const nl = new Intl.DateTimeFormat("nl-NL", {
      timeZone: tz, weekday:"long", year:"numeric", month:"long", day:"numeric"
    });
    document.getElementById("todayText").textContent = nl.format(new Date());

    const entries = parseList();
    const byMD = groupByMD(entries);

    const { y, md: todayMD } = todayMDY();
    const todayIdx = dayOfYearFromMD(todayMD, y);

    const uniqueMDs = Array.from(byMD.keys())
      .sort((a,b)=>dayOfYearFromMD(a,y)-dayOfYearFromMD(b,y));

    if (uniqueMDs.length === 0){
      setSlot("prev", null, []);
      setSlot("mid", null, []);
      setSlot("next", null, []);
      document.getElementById("midPill").textContent = "‚Äî";
      return;
    }

    const todays = byMD.get(todayMD) || [];

    // Slot2: vandaag als er jarigen zijn, anders eerstvolgende datum (wrap)
    let midMD = null;
    if (todays.length > 0){
      midMD = todayMD;
    } else {
      midMD = uniqueMDs.find(m => dayOfYearFromMD(m,y) > todayIdx) || uniqueMDs[0];
    }

    // Slot1: laatste datum v√≥√≥r slot2 (wrap)
    const midIdx = dayOfYearFromMD(midMD, y);
    let prevMD = null;
    for (let i = uniqueMDs.length - 1; i >= 0; i--){
      const m = uniqueMDs[i];
      if (dayOfYearFromMD(m,y) < midIdx){
        prevMD = m; break;
      }
    }
    if (!prevMD) prevMD = uniqueMDs[uniqueMDs.length - 1];

    // Slot3: eerste datum n√° slot2 (wrap)
    let nextMD = uniqueMDs.find(m => dayOfYearFromMD(m,y) > midIdx) || uniqueMDs[0];

    // Vul slots
    setSlot("prev", prevMD, byMD.get(prevMD) || []);
    setSlot("mid", midMD, byMD.get(midMD) || []);
    setSlot("next", nextMD, byMD.get(nextMD) || []);

    // Pill + styling voor slot2
    const midPill = document.getElementById("midPill");
    midPill.classList.remove("good");
    if (todays.length > 0){
      midPill.textContent = "üéâ Vandaag jarig!";
      midPill.classList.add("good");
    } else {
      midPill.textContent = "‚û°Ô∏è Bijna jarig!";
    }


  }

  render();
  setInterval(render, 60 * 1000);
</script>
</body>
</html>
